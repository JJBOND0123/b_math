# Bilibili Math 学习助手

面向大学生的数学学习聚合系统，提供 B 站热门课程与习题视频的采集、可视化与个性化学习管理。通过“看一眼就懂”的仪表盘和对比工具，帮助你快速找到合适的老师、刷题资源和复习路线。

## 主要功能
- **学习数据面板**：展示总视频量、播放量、干货指数榜单、学科分布等核心指标，便于快速摸清可用资源。  
- **视频检索与筛选**：按干货率、播放量或发布时间排序，支持标题、标签、UP 主关键词搜索与学科分类筛选。  
- **学习路径推荐**：基于不同学习场景（考前冲刺、基础巩固、刷题练习等）推荐视频，节省选课时间。  
- **UP 主对比**：雷达图对比不同老师的产出、热度、质量、互动度与硬核指数，附带关键词词云。  
- **个人学习中心**：登录后可收藏、待看、记录历史观看，上传头像并编辑个人简介，形成专属学习档案。  
- **数据采集脚本**：`spider/bilibili_api.py` 支持按自定义关键词抓取 B 站数据并写入数据库，附带分类映射与分页上限配置。

## 技术栈
- **后端**：Flask + Flask-Login + SQLAlchemy
- **数据库**：MySQL（`config.py` 中配置连接）
- **前端**：Flask 模板 + ECharts 数据可视化
- **测试**：Pytest 覆盖数据解析与接口逻辑

## 快速开始
1. **准备环境**  
   - Python 3.10+，Node 不必安装。  
   - 本地 MySQL 实例（确保有可写库，如 `bilibili_math_db`）。

2. **安装依赖**  
   ```bash
   pip install -r requirements.txt
   ```

3. **配置数据库**  
   编辑 `config.py` 中的 `SQLALCHEMY_DATABASE_URI` 和 `SECRET_KEY`。爬虫脚本使用同一组连接信息（`spider/bilibili_api.py` 的 `DB_CONFIG`）。

4. **初始化数据**  
   - 如已有数据表，可直接运行应用；否则参考 `spider/bilibili_api.py` 的建表语句或在数据库中创建 `videos`、`users`、`user_actions` 三张表。  
   - 运行爬虫填充数据：
     ```bash
     python spider/bilibili_api.py
     ```

5. **启动应用**  
   ```bash
   flask --app app run --debug
   ```
   浏览器打开 `http://127.0.0.1:5000/`。首次使用可在注册页创建账号，适合个人或校园服务器部署。

6. **运行测试**  
   ```bash
   pytest
   ```

## 面向大学生的使用建议
- **考前突击**：使用“推荐-冲刺”场景获取时长较短的高频考点讲解，配合 UP 主对比挑选自己喜欢的风格。  
- **系统复习**：按学科分类浏览，结合干货指数排序找到完整课程，添加到“待看”并跟踪完成度。  
- **刷题练习**：搜索“习题”“真题”关键词并收藏高赞视频，利用历史记录回顾薄弱环节。  
- **协同学习**：在校园内网部署后，同学们可共享同一数据库数据，形成共同的资源池。

## 目录速览
- `app.py`：主要视图与 API（仪表盘、搜索、对比、推荐、用户中心等）。
- `models.py`：SQLAlchemy 模型定义。 
- `spider/`：数据抓取与清洗脚本。 
- `templates/` 与 `static/`：前端模板和资源。 
- `tests/`：Pytest 测试用例。

## 常见问题
- **登录失败或页面跳转到登录**：确认已配置 `SECRET_KEY`，并确保浏览器允许 Cookie。  
- **看不到数据**：检查数据库连接和表数据；如为空，运行爬虫或手动导入。  
- **无法抓取**：更新 `COOKIE`、确保网络可访问 B 站，并根据需要调高 `MAX_PAGES`。

祝你在大学数学学习中高效进步！
